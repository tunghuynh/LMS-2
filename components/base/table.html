<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table Component - LMS</title>
    <link rel="stylesheet" href="../../assets/css/global.css">
    <link rel="stylesheet" href="../../assets/css/themes.css">
    <link rel="stylesheet" href="../../assets/css/components.css">
    <style>
        .demo-container {
            padding: var(--spacing-6);
            max-width: 1200px;
            margin: 0 auto;
        }
        .demo-section {
            margin-bottom: var(--spacing-8);
        }
        .demo-title {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--spacing-4);
            color: var(--text-primary);
        }
        .demo-subtitle {
            font-size: var(--font-size-lg);
            color: var(--text-secondary);
            margin-bottom: var(--spacing-4);
        }
        .demo-controls {
            display: flex;
            gap: var(--spacing-2);
            margin-bottom: var(--spacing-4);
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">Table Component</h1>
        
        <!-- Basic Table -->
        <section class="demo-section">
            <h2 class="demo-subtitle">Basic Table with Sorting & Selection</h2>
            <div class="table-wrapper">
                <table class="table">
                    <thead>
                        <tr class="table__header">
                            <th class="table__cell table__cell--header table__cell--center">
                                <input type="checkbox" class="table__checkbox" id="selectAll">
                            </th>
                            <th class="table__cell table__cell--header table__cell--sortable" data-sort="id">
                                ID
                                <span class="table__sort-icon"></span>
                            </th>
                            <th class="table__cell table__cell--header table__cell--sortable" data-sort="name">
                                Name
                                <span class="table__sort-icon"></span>
                            </th>
                            <th class="table__cell table__cell--header table__cell--sortable" data-sort="email">
                                Email
                                <span class="table__sort-icon"></span>
                            </th>
                            <th class="table__cell table__cell--header table__cell--hide-mobile">Role</th>
                            <th class="table__cell table__cell--header table__cell--sortable table__cell--hide-mobile" data-sort="date">
                                Join Date
                                <span class="table__sort-icon"></span>
                            </th>
                            <th class="table__cell table__cell--header">Status</th>
                            <th class="table__cell table__cell--header table__cell--center">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Table rows will be generated by JavaScript -->
                    </tbody>
                </table>
                <div class="table__pagination">
                    <div class="table__pagination-info">
                        Showing <span id="startRow">1</span> to <span id="endRow">5</span> of <span id="totalRows">15</span> entries
                    </div>
                    <div class="table__pagination-controls" id="paginationControls">
                        <!-- Pagination buttons will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Empty State Table -->
        <section class="demo-section">
            <h2 class="demo-subtitle">Empty State</h2>
            <div class="table-wrapper">
                <table class="table">
                    <thead>
                        <tr class="table__header">
                            <th class="table__cell table__cell--header">Column 1</th>
                            <th class="table__cell table__cell--header">Column 2</th>
                            <th class="table__cell table__cell--header">Column 3</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="3" class="table__empty">
                                <div class="table__empty-icon">üì≠</div>
                                <div class="table__empty-text">No data available</div>
                                <div class="table__empty-subtext">Try adjusting your filters or add new items</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Loading State Table -->
        <section class="demo-section">
            <h2 class="demo-subtitle">Loading State</h2>
            <div class="table-wrapper">
                <div class="table__loading">
                    <table class="table">
                        <thead>
                            <tr class="table__header">
                                <th class="table__cell table__cell--header">Column 1</th>
                                <th class="table__cell table__cell--header">Column 2</th>
                                <th class="table__cell table__cell--header">Column 3</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table__row">
                                <td class="table__cell">Loading...</td>
                                <td class="table__cell">Loading...</td>
                                <td class="table__cell">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="table__loading-spinner"></div>
                </div>
            </div>
        </section>

        <!-- Striped Table -->
        <section class="demo-section">
            <h2 class="demo-subtitle">Striped Table</h2>
            <div class="demo-controls">
                <button class="btn btn--secondary btn--small" onclick="toggleStriped()">Toggle Striped</button>
                <button class="btn btn--secondary btn--small" onclick="toggleCondensed()">Toggle Condensed</button>
            </div>
            <div class="table-wrapper">
                <table class="table" id="stripedTable">
                    <thead>
                        <tr class="table__header">
                            <th class="table__cell table__cell--header">Course</th>
                            <th class="table__cell table__cell--header">Instructor</th>
                            <th class="table__cell table__cell--header table__cell--center">Students</th>
                            <th class="table__cell table__cell--header table__cell--center">Rating</th>
                            <th class="table__cell table__cell--header table__cell--right">Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table__row">
                            <td class="table__cell">Introduction to Web Development</td>
                            <td class="table__cell">Jane Smith</td>
                            <td class="table__cell table__cell--center">45</td>
                            <td class="table__cell table__cell--center">‚≠ê 4.5</td>
                            <td class="table__cell table__cell--right">Free</td>
                        </tr>
                        <tr class="table__row">
                            <td class="table__cell">Advanced JavaScript</td>
                            <td class="table__cell">John Doe</td>
                            <td class="table__cell table__cell--center">32</td>
                            <td class="table__cell table__cell--center">‚≠ê 4.8</td>
                            <td class="table__cell table__cell--right">$49.99</td>
                        </tr>
                        <tr class="table__row">
                            <td class="table__cell">React.js Fundamentals</td>
                            <td class="table__cell">Jane Smith</td>
                            <td class="table__cell table__cell--center">58</td>
                            <td class="table__cell table__cell--center">‚≠ê 4.7</td>
                            <td class="table__cell table__cell--right">$39.99</td>
                        </tr>
                        <tr class="table__row">
                            <td class="table__cell">Database Design</td>
                            <td class="table__cell">Mike Johnson</td>
                            <td class="table__cell table__cell--center">28</td>
                            <td class="table__cell table__cell--center">‚≠ê 4.3</td>
                            <td class="table__cell table__cell--right">$29.99</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Theme Switcher -->
        <div style="position: fixed; top: 20px; right: 20px;">
            <button class="btn btn--secondary btn--small" id="themeToggle">
                Toggle Theme
            </button>
        </div>
    </div>

    <script src="../../assets/js/global.js"></script>
    <script>
        // Sample data
        const sampleData = [
            { id: 1, name: 'John Doe', email: 'john@example.com', role: 'Student', date: '2024-01-15', status: 'Active' },
            { id: 2, name: 'Jane Smith', email: 'jane@example.com', role: 'Teacher', date: '2024-01-10', status: 'Active' },
            { id: 3, name: 'Bob Johnson', email: 'bob@example.com', role: 'Student', date: '2024-02-20', status: 'Inactive' },
            { id: 4, name: 'Alice Brown', email: 'alice@example.com', role: 'Student', date: '2024-02-15', status: 'Active' },
            { id: 5, name: 'Charlie Wilson', email: 'charlie@example.com', role: 'Admin', date: '2023-12-01', status: 'Active' },
            { id: 6, name: 'Diana Lee', email: 'diana@example.com', role: 'Teacher', date: '2024-03-01', status: 'Active' },
            { id: 7, name: 'Eve Davis', email: 'eve@example.com', role: 'Student', date: '2024-03-05', status: 'Active' },
            { id: 8, name: 'Frank Miller', email: 'frank@example.com', role: 'Student', date: '2024-02-28', status: 'Inactive' },
            { id: 9, name: 'Grace Taylor', email: 'grace@example.com', role: 'Teacher', date: '2024-01-20', status: 'Active' },
            { id: 10, name: 'Henry Anderson', email: 'henry@example.com', role: 'Student', date: '2024-03-10', status: 'Active' },
            { id: 11, name: 'Iris Martinez', email: 'iris@example.com', role: 'Student', date: '2024-02-25', status: 'Active' },
            { id: 12, name: 'Jack Thompson', email: 'jack@example.com', role: 'Teacher', date: '2024-01-05', status: 'Active' },
            { id: 13, name: 'Kate White', email: 'kate@example.com', role: 'Student', date: '2024-03-15', status: 'Inactive' },
            { id: 14, name: 'Leo Harris', email: 'leo@example.com', role: 'Student', date: '2024-02-10', status: 'Active' },
            { id: 15, name: 'Mia Clark', email: 'mia@example.com', role: 'Admin', date: '2023-11-15', status: 'Active' }
        ];

        // Table state
        let currentPage = 1;
        const rowsPerPage = 5;
        let sortColumn = null;
        let sortDirection = 'asc';
        let selectedRows = new Set();

        // Initialize table
        renderTable();
        
        // Render table function
        function renderTable() {
            const tableBody = document.getElementById('tableBody');
            const startIndex = (currentPage - 1) * rowsPerPage;
            const endIndex = startIndex + rowsPerPage;
            
            // Sort data if needed
            let sortedData = [...sampleData];
            if (sortColumn) {
                sortedData.sort((a, b) => {
                    let aVal = a[sortColumn];
                    let bVal = b[sortColumn];
                    
                    if (sortColumn === 'date') {
                        aVal = new Date(aVal);
                        bVal = new Date(bVal);
                    }
                    
                    if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1;
                    if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1;
                    return 0;
                });
            }
            
            // Get page data
            const pageData = sortedData.slice(startIndex, endIndex);
            
            // Render rows
            tableBody.innerHTML = pageData.map(row => `
                <tr class="table__row table__row--hoverable ${selectedRows.has(row.id) ? 'table__row--selected' : ''}">
                    <td class="table__cell table__cell--center">
                        <input type="checkbox" class="table__checkbox" data-id="${row.id}" ${selectedRows.has(row.id) ? 'checked' : ''}>
                    </td>
                    <td class="table__cell">${row.id}</td>
                    <td class="table__cell table__cell--nowrap">${row.name}</td>
                    <td class="table__cell">${row.email}</td>
                    <td class="table__cell table__cell--hide-mobile">${row.role}</td>
                    <td class="table__cell table__cell--hide-mobile">${new Date(row.date).toLocaleDateString()}</td>
                    <td class="table__cell">
                        <span style="
                            display: inline-block;
                            padding: 2px 8px;
                            border-radius: 12px;
                            font-size: 12px;
                            background: ${row.status === 'Active' ? 'var(--status-success-bg)' : 'var(--status-error-bg)'};
                            color: ${row.status === 'Active' ? 'var(--status-success-text)' : 'var(--status-error-text)'};
                        ">${row.status}</span>
                    </td>
                    <td class="table__cell table__cell--center">
                        <button class="btn btn--ghost btn--small" onclick="editRow(${row.id})">Edit</button>
                    </td>
                </tr>
            `).join('');
            
            // Update pagination info
            document.getElementById('startRow').textContent = startIndex + 1;
            document.getElementById('endRow').textContent = Math.min(endIndex, sortedData.length);
            document.getElementById('totalRows').textContent = sortedData.length;
            
            // Render pagination controls
            renderPagination(sortedData.length);
            
            // Update sort indicators
            updateSortIndicators();
        }
        
        // Render pagination
        function renderPagination(totalRows) {
            const totalPages = Math.ceil(totalRows / rowsPerPage);
            const controls = document.getElementById('paginationControls');
            
            let html = `
                <button class="table__pagination-button" onclick="goToPage(1)" ${currentPage === 1 ? 'disabled' : ''}>First</button>
                <button class="table__pagination-button" onclick="goToPage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>Previous</button>
            `;
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                    html += `<button class="table__pagination-button ${i === currentPage ? 'table__pagination-button--active' : ''}" onclick="goToPage(${i})">${i}</button>`;
                } else if (i === currentPage - 2 || i === currentPage + 2) {
                    html += `<span style="padding: 0 8px; color: var(--text-muted);">...</span>`;
                }
            }
            
            html += `
                <button class="table__pagination-button" onclick="goToPage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>Next</button>
                <button class="table__pagination-button" onclick="goToPage(${totalPages})" ${currentPage === totalPages ? 'disabled' : ''}>Last</button>
            `;
            
            controls.innerHTML = html;
        }
        
        // Navigation functions
        function goToPage(page) {
            currentPage = page;
            renderTable();
        }
        
        // Sort function
        document.addEventListener('click', function(e) {
            if (e.target.closest('.table__cell--sortable')) {
                const cell = e.target.closest('.table__cell--sortable');
                const column = cell.dataset.sort;
                
                if (sortColumn === column) {
                    sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
                } else {
                    sortColumn = column;
                    sortDirection = 'asc';
                }
                
                currentPage = 1;
                renderTable();
            }
        });
        
        // Update sort indicators
        function updateSortIndicators() {
            document.querySelectorAll('.table__cell--sortable').forEach(cell => {
                cell.classList.remove('table__cell--sort-asc', 'table__cell--sort-desc');
                if (cell.dataset.sort === sortColumn) {
                    cell.classList.add(`table__cell--sort-${sortDirection}`);
                }
            });
        }
        
        // Row selection
        document.addEventListener('change', function(e) {
            if (e.target.classList.contains('table__checkbox')) {
                const id = parseInt(e.target.dataset.id);
                if (id) {
                    if (e.target.checked) {
                        selectedRows.add(id);
                    } else {
                        selectedRows.delete(id);
                    }
                    renderTable();
                }
            }
        });
        
        // Select all
        document.getElementById('selectAll').addEventListener('change', function(e) {
            if (e.target.checked) {
                sampleData.forEach(row => selectedRows.add(row.id));
            } else {
                selectedRows.clear();
            }
            renderTable();
        });
        
        // Edit row (demo)
        function editRow(id) {
            console.log('Edit row:', id);
            alert(`Edit row ${id} - This is a demo`);
        }
        
        // Toggle striped
        function toggleStriped() {
            document.getElementById('stripedTable').classList.toggle('table--striped');
        }
        
        // Toggle condensed
        function toggleCondensed() {
            document.getElementById('stripedTable').classList.toggle('table--condensed');
        }
    </script>
</body>
</html>
